{% extends 'main/base.html' %}
{% load static %}
{% load main_filters %}

{% block content %}

    <div class="container-fluid" style="padding: 25px;">
        <!-- Center image -->
        <img class="img-fluid rounded" src="{{ player.headshot }}" style="height: 250px; width: 250px; display: block; margin-left: auto; margin-right: auto;" alt="Center">
        <h2 class="text-uppercase fw-bold mb-3 mt-3" style="text-align: center;">{{ player.first_name}} {{ player.last_name}}</h2>
        <p style="text-align: center;">
            <!-- Upgrade & upgrade logs -->
            <a class="btn btn-primary btn-sm text-white" href="{% url 'upgrade_player' player.id %}">Upgrade player</a>
            <a class="btn btn-primary btn-sm text-white" href="{% url 'upgrade_logs' player.id %}">Upgrade history</a>
            <a class="btn btn-primary btn-sm text-white" href="{% url 'cash_logs' player.id %}">Cash history</a>
            <!-- Player file -->
            <button id="file" type="button" class="copyJSON btn btn-primary btn-sm" onClick="clipboard(this.id)">Copy File</button>
            <p id="json_file" class="file" style="font-size: 6px; display: none;">{{ file }}</p>
            <!-- Upgrades pending? -->
            {% if player.upgrades_pending %}
                <p class="fw-bold text-danger text-center">Pending upgrades</p>
            {% else %}
                <p class="fw-bold text-success text-center">No pending upgrades</p>
            {% endif %}
        </p>
    </div>

    <hr>

    <div class="container-fluid" style="padding: 25px;">
        <!-- Add form to pay player if user.can_update_players -->
        {% if user.can_update_players %}
            <div class="container">
                <div class="row">
                    <!-- Pay players -->
                    <div class="col-6 mb-2">
                        <div class="card">
                            <div class="card-header">
                                <h3><span class="panel-title-text">Add Cash</span></h3>
                            </div>
                            <div class="card-body">
                                <form action="{% url 'add_player_cash' %}" method="POST">
                                    {% csrf_token %}
                                    <input type="hidden" name="id" value="{{ player.id }}">
                                    <div class="row">
                                        <div class="col-12 mb-2">
                                            <!-- Text area for adding cash -->
                                            <input name="amount" class="form-control mb-1" type="number" required placeholder="Enter cash amount"/>
                                            <input name="reason" class="form-control" type="text" required placeholder="Enter reason"/><hr>
                                            <input name="bypass" class="form-check-input" type="checkbox" value="true" id="bypass">
                                            <label for="bypass">Bypass Weekly Earnings</label><hr>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12"><button class="btn btn-success btn-sm d-block w-100" type="submit">Add cash</button></div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- Fine players -->
                    <div class="col-6">
                        <div class="card">
                            <div class="card-header">
                                <h3><span class="panel-title-text">Take Cash</span></h3>
                            </div>
                            <div class="card-body">
                                <form action="{% url 'take_player_cash' %}" method="POST">
                                    {% csrf_token %}
                                    <input type="hidden" name="id" value="{{ player.id }}">
                                    <div class="row">
                                        <div class="col-12 mb-2">
                                            <!-- Text area for adding cash -->
                                            <input name="amount" class="form-control mb-1" type="number" required placeholder="Enter cash amount"/>
                                            <input name="reason" class="form-control" type="text" required placeholder="Enter reason"/>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12"><button class="btn btn-danger btn-sm d-block w-100" type="submit">Take cash</button></div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>

    <div class="container-fluid mb-5" style="padding-top: 0px; padding-bottom: 10px;">
        <hr>
        <div class="container">
            <div class="row">
                <!-- Uneditable player details -->
                <div class="col-md-2">
                    <p><b>Full Name</b></p><hr>
                    <p>{{ player.first_name }} {{ player.last_name }}</p>
                </div>
                <div class="col-md-2">
                    <p><b>Height</b></p><hr>
                    <p>{{ height_in_feet }}</p>
                </div>
                <div class="col-md-2">
                    <p><b>Weight</b></p><hr>
                    <p>{{ player.weight }} <a href="{% url 'edit_physicals' player.id %}">Edit</a></p>
                </div>
                <div class="col-md-2">
                    <p><b>Position</b></p><hr>
                    <p>{{ player.primary_position }}/{{ player.secondary_position }}</p>
                </div>
                <div class="col-md-2">
                    <p><b>Team</b></p><hr>
                    <p>{{ player.current_team.abbrev }}</p>
                </div>
                <div class="col-md-2">
                    <p><b>Spent</b></p><hr>
                    <p>${{ player.spent }}</p>
                </div>
                <!-- Editable player details -->
                <div class="row mb-3">
                    <!-- Editable by player owner -->
                    {% if player.discord_user == user %}
                        <form action="{% url 'update_player_vitals' player.id %}" method="POST">
                            {% csrf_token %}
                            <!-- Put jersey and cyberface horizontall -->
                            <div class="row">
                                <div class="col-md-2">
                                    <p><b>Jersey</b></p><hr>
                                    <input name="jersey" class="form-control mb-2" type="number" style="width: 50%;" value="{{ player.jersey_number }}"/>
                                </div>
                                <div class="col-md-2">
                                    <p><b>Cyberface</b></p><hr>
                                    <input name="cyberface" class="form-control mb-2" type="number" style="width: 50%;" value="{{ player.cyberface }}"/>
                                </div>
                                <div class="col-md-2">
                                    <p><b>Use Game Tendencies</b></p><hr>
                                    <select class="form-select mb-2" name="use_game" style="width: 50%">
                                        <option value="{{ player.use_game_tendencies }}">{{ player.use_game_tendencies }}</option>
                                        {% if player.use_game_tendencies %}
                                            <option value="False">False</option>
                                        {% else %}
                                            <option value="True">True</option>
                                        {% endif %}
                                    </select>
                                </div>
                                <br>
                                <!-- Play styles -->
                                <div class="col-md-2">
                                    <p><b>Play Style #1</b></p><hr>
                                    <select class="form-select mb-2" name="playstyle1" style="width: 50%">
                                        <option value="{{ playstyle1.1 }}">{{ playstyle1.0 }}</option>
                                        {% for i, playstyle in playstyles.items %}
                                            {% if not playstyle == playstyle1.0 %}
                                                <option value="{{ i }}">{{ playstyle }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <p><b>Play Style #2</b></p><hr>
                                    <select class="form-select mb-2" name="playstyle2" style="width: 50%">
                                        <option value="{{ playstyle2.1 }}">{{ playstyle2.0 }}</option>
                                        {% for i, playstyle in playstyles.items %}
                                            {% if not playstyle == playstyle2.0 %}
                                                <option value="{{ i }}">{{ playstyle }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <p><b>Play Style #3</b></p><hr>
                                    <select class="form-select mb-2" name="playstyle3" style="width: 50%">
                                        <option value="{{ playstyle3.1 }}">{{ playstyle3.0 }}</option>
                                        {% for i, playstyle in playstyles.items %}
                                            {% if not playstyle == playstyle3.0 %}
                                                <option value="{{ i }}">{{ playstyle }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <p><b>Play Style #4</b></p><hr>
                                    <select class="form-select mb-2" name="playstyle4" style="width: 50%">
                                        <option value="{{ playstyle4.1 }}">{{ playstyle4.0 }}</option>
                                        {% for i, playstyle in playstyles.items %}
                                            {% if not playstyle == playstyle4.0 %}
                                                <option value="{{ i }}">{{ playstyle }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                                <!-- Headshot -->
                                <div class="col-md-2">
                                    <p><b>Headshot</b></p><hr>
                                    <input name="headshot" class="form-control mb-2" type="text" style="width: 50%;" value="{{ player.headshot }}" placeholder="{{ player.headshot }}"/>
                                </div>
                                <!-- End of updateables -->
                            </div>
                            <button class="btn btn-success btn-sm mt-2" type="submit" onkeydown="return event.key != 'Enter';">Update</button>
                        </form>
                    {% else %}
                        <div class="col-md-2">
                            <p><b>Jersey</b></p><hr>
                            <p>#{{ player.jersey_number }}</p>
                        </div>
                        <div class="col-md-2">
                            <p><b>Cyberface</b></p><hr>
                            <p>{{ player.cyberface }}</p>
                        </div>
                        <div class="col-md-2">
                            <p><b>Use Game Tendencies</b></p><hr>
                            <p>{{ player.use_game_tendencies }}</p>
                        </div>
                        <div class="col-md-2">
                            <p><b>Play Style #1</b></p><hr>
                            <p>{{ playstyle1.0 }}</p>
                        </div>
                        <div class="col-md-2">
                            <p><b>Play Style #2</b></p><hr>
                            <p>{{ playstyle2.0 }}</p>
                        </div>
                        <div class="col-md-2">
                            <p><b>Play Style #3</b></p><hr>
                            <p>{{ playstyle3.0 }}</p>
                        </div>
                        <div class="col-md-2">
                            <p><b>Play Style #4</b></p><hr>
                            <p>{{ playstyle4.0 }}</p>
                        </div>
                    {% endif %}
                </div>
                <!-- Trait & archetype details -->
                <hr>
                <p class="mb-0"><b>Trait 1:</b> {{ player.trait_one }}</p>
                <p class="mb-0"><b>Trait 2:</b> {{ player.trait_two }}</p>
                <p class="mb-0"><b>Trait 3:</b> {{ player.trait_three }}</p>
                {% if player.primary_archetype != player.secondary_archetype %}
                <p class="mb-0"><b>Archetypes:</b> {{ player.primary_archetype }} {{ player.secondary_archetype }}</p>
                {% else %}
                <p class="mb-0"><b>Archetype:</b> {{ player.primary_archetype }}</p>
                {% endif %}
                <p class="mb-0"><b>Creator:</b> {{ player.discord_user.discord_tag }}</p>
                <p><b>Week Earnings:</b> ${{ week_earnings }}</p>
                <!-- Contract details -->
                <hr>
                <p class="mb-0"><b>Referral Code:</b> {{ player.id }}</p>
                <p class="mb-0"><b>Contract Salary:</b> ${{ player.salary }}</p>
                <p class="mb-0"><b>Contract Expires:</b> <i></i> Season {{ player.contract_ends_after }}</p>
                <p class="mb-0"><b>Contract Option:</b> {{ player.contract_option }}</p>
                <p class="mb-0"><b>Contract Benefits:</b> {{ player.contract_benefits }}</p>
                <!-- Award details -->
                <hr class="mt-3">
                <p class="mb-0">
                    {% if awards.MVP %}
                        üèÜ <b>MVP:</b>
                        {% for a in awards.MVP %}
                            S{{ a }} 
                        {% endfor %}<br>
                    {% endif %}
                    {% if awards.DPOY %}
                        üîè <b>DPOY:</b>
                        {% for a in awards.DPOY %}
                            S{{ a }} 
                        {% endfor %}<br>
                    {% endif %}
                    {% if awards.MIP %}
                        üíπ <b>MIP:</b>
                        {% for a in awards.MIP %}
                            S{{ a }} 
                        {% endfor %}<br>
                    {% endif %}
                    {% if awards.ROY %}
                        üë¶ <b>ROY:</b>
                        {% for a in awards.ROY %}
                            S{{ a }} 
                        {% endfor %}<br>
                    {% endif %}
                    {% if awards.AH1ST %}
                        üèÄ <b>AH1ST:</b>
                        {% for a in awards.AH1ST %}
                            S{{ a }} 
                        {% endfor %}<br>
                    {% endif %}
                    {% if awards.AH2ND %}
                        üèÄ <b>AH2ND:</b>
                        {% for a in awards.AH2ND %}
                            S{{ a }} 
                        {% endfor %}<br>
                    {% endif %}
                    {% if awards.D1ST %}
                        üîí <b>D1ST:</b>
                        {% for a in awards.D1ST %}
                            S{{ a }} 
                        {% endfor %}<br>
                    {% endif %}
                    {% if awards.D2ND %}
                        üîí <b>D2ND:</b>
                        {% for a in awards.D2ND %}
                            S{{ a }} 
                        {% endfor %}<br>
                    {% endif %}
                    {% if awards.KOTS %}
                        üëë <b>KOTS:</b> x{{ awards.KOTS }}<br>
                    {% endif %}
                    {% if awards.RING %}
                        üíç <b>RING:</b>
                        {% for a in awards.RING %}
                            S{{ a }} 
                        {% endfor %}<br>
                    {% endif %}
                    {% if awards.FMVP %}
                        üåü <b>FMVP:</b>
                        {% for a in awards.FMVP %}
                            S{{ a }} 
                        {% endfor %}<br>
                    {% endif %}
                    {% if awards.ASG %}
                        ‚≠ê <b>ASG:</b>
                        {% for a in awards.ASG %}
                            S{{ a }} 
                        {% endfor %}<br>
                    {% endif %}
                    {% if awards.ASGMVP %}
                        üí´ <b>ASGMVP:</b>
                        {% for a in awards.ASGMVP %}
                            S{{ a }} 
                        {% endfor %}<br>
                    {% endif %}
                    {% if awards.3PTWIN %}
                        3Ô∏è‚É£ <b>3PTWIN:</b>
                        {% for a in awards.3PTWIN %}
                            S{{ a }} 
                        {% endfor %}<br> 
                    {% endif %}
                    {% if awards.DNKWIN %}
                        üí™ <b>DNKWIN:</b>
                        {% for a in awards.DNKWIN %}
                            S{{ a }} 
                        {% endfor %}<br> 
                    {% endif %}
                </p>
                <!-- Redesign attempt -->
                <ul class="nav nav-tabs" id="myTabs">
                    <li class="nav-item">
                        <a class="nav-link active" id="tab1" data-bs-toggle="tab" href="#menu1">Attributes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="tab2" data-bs-toggle="tab" href="#menu2">Badges</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="tab3" data-bs-toggle="tab" href="#menu3">Tendencies</a>
                    </li>
                </ul>

                <div class="tab-content">
                    <!-- Attribute menu -->
                    <div class="tab-pane fade show active mt-2" id="menu1">
                        <div class="d-flex justify-content-start" style="gap: 20px;">
                            <div id="finishing-attributes">
                                <table>
                                    <thead>
                                        <tr class="border-bottom"><th class="p-0" colspan="2">Finishing</th></tr>
                                    </thead>
                                    <tbody>
                                        {% for k, v in player.attributes.items %}
                                            <tr>
                                                {% if k in finishing_attributes %}
                                                    <td>{{ k }}:</td>
                                                    <td style="padding-left: 10px;">{{ v }}</td>
                                                {% endif %}
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            <div id="shooting-attributes">
                                <table>
                                    <thead>
                                        <tr class="border-bottom"><th class="p-0" colspan="2">Shooting</th></tr>
                                    </thead>
                                    <tbody>
                                        {% for k, v in player.attributes.items %}
                                            <tr>
                                                {% if k in shooting_attributes %}
                                                    <td>{{ k }}:</td>
                                                    <td style="padding-left: 10px;">{{ v }}</td>
                                                {% endif %}
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            <div id="playmaking-attributes">
                                <table>
                                    <thead>
                                        <tr class="border-bottom"><th class="p-0" colspan="2">Playmaking</th></tr>
                                    </thead>
                                    <tbody>
                                        {% for k, v in player.attributes.items %}
                                            <tr>
                                                {% if k in playmaking_attributes %}
                                                    <td>{{ k }}:</td>
                                                    <td style="padding-left: 10px;">{{ v }}</td>
                                                {% endif %}
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            <div id="defense-attributes">
                                <table>
                                    <thead>
                                        <tr class="border-bottom"><th class="p-0" colspan="2">Defense</th></tr>
                                    </thead>
                                    <tbody>
                                        {% for k, v in player.attributes.items %}
                                            <tr>
                                                {% if k in defense_attributes %}
                                                    <td>{{ k }}:</td>
                                                    <td style="padding-left: 10px;">{{ v }}</td>
                                                {% endif %}
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div> 
                        </div>
                    </div>
                    <!-- Badge menu -->
                    <div class="tab-pane fade" id="menu2">
                        <!-- Content for Menu 2 goes here -->
                    </div>
                    <!-- Tendency menu -->
                    <div class="tab-pane fade" id="menu3">
                        <!-- Content for Menu 3 goes here -->
                    </div>
                </div>

            </div>
        </div>

        <!-- Player statistics -->
        <div class="container-fluid mb-5 p-5">

            <h2 class="mb-3">Player Statistics</h2>
            <hr>

            <p>Averages</p>
            <table class="table table-striped table-hover table-responsive">
                <thead>
                    <tr>
                        <th>SEASON</th>
                        <th>TEAM</th>
                        <th>GP</th>
                        <th>GMSC</th>
                        <th>PPG</th>
                        <th>RPG</th>
                        <th>APG</th>
                        <th>SPG</th>
                        <th>BPG</th>
                        <th>TPG</th>
                        <th>FPG</th>
                        <th>FG%</th>
                        <th>3P%</th>
                        <th>FT%</th>
                        <th>OREB</th>
                        <th>AWARDS</th>
                    </tr>
                </thead>
                <!-- Specific team stats -->
                {% for season, season_data in player_career_stats.items %}
                    <tbody>
                        {% for team_at_time, stats_on_team in season_data.teamly_stats.items %}
                            <tr>
                                {% if forloop.first %}
                                    <td rowspan="{{ season_data.teamly_stats|lengthinc }}">Season {{ season_data.season }}</td>
                                {% endif %}
                                <td>{{ team_at_time }}</td>
                                <td>{{ stats_on_team.totals.gp }}</td>
                                <td>{{ stats_on_team.averages.gmsc }}</td>
                                <td>{{ stats_on_team.averages.ppg }}</td>
                                <td>{{ stats_on_team.averages.rpg }}</td>
                                <td>{{ stats_on_team.averages.apg }}</td>
                                <td>{{ stats_on_team.averages.spg }}</td>
                                <td>{{ stats_on_team.averages.bpg }}</td>
                                <td>{{ stats_on_team.averages.tpg }}</td>
                                <td>{{ stats_on_team.averages.fpg }}</td>
                                <td>{{ stats_on_team.totals.fgm|getpercentage:stats_on_team.totals.fga }}</td>
                                <td>{{ stats_on_team.totals.tpm|getpercentage:stats_on_team.totals.tpa }}</td>
                                <td>{{ stats_on_team.totals.ftm|getpercentage:stats_on_team.totals.fta }}</td>
                                <td>{{ stats_on_team.averages.orpg }}</td>
                                {% if forloop.first %}
                                    <td rowspan="{{ season_data.teamly_stats|lengthinc }}">
                                        {% if season in awards.MVP %} üèÜ {% endif %}
                                        {% if season in awards.DPOY %} üîè {% endif %}
                                        {% if season in awards.RING %} üíç {% endif %}
                                        {% if season in awards.FMVP %} üåü {% endif %}
                                        {% if season in awards.ASG %} ‚≠ê {% endif %}
                                    </td>
                                {% endif %}
                            </tr>
                        {% endfor %}
                        <!-- Full year stats -->
                        {% if season_data.teamly_stats|length > 1 %}
                            <tr>
                                <td></td>
                                <td>{{ season_data.yearly_stats.totals.gp }}</td>
                                <td> {{ season_data.yearly_stats.averages.gmsc }}</td>
                                <td>{{ season_data.yearly_stats.averages.ppg }}</td>
                                <td>{{ season_data.yearly_stats.averages.rpg }}</td>
                                <td>{{ season_data.yearly_stats.averages.apg }}</td>
                                <td>{{ season_data.yearly_stats.averages.spg }}</td>
                                <td>{{ season_data.yearly_stats.averages.bpg }}</td>
                                <td>{{ season_data.yearly_stats.averages.tpg }}</td>
                                <td>{{ season_data.yearly_stats.averages.fpg }}</td>
                                <td>{{ season_data.yearly_stats.averages.fgp }}</td>
                                <td>{{ season_data.yearly_stats.averages.tpp }}</td>
                                <td>{{ season_data.yearly_stats.averages.ftp }}</td>
                                <td>{{ season_data.yearly_stats.averages.orpg }}</td>
                            </tr>
                        {% endif %}
                    </tbody>
                {% endfor %}
            </table>

            <hr>

            <p>Totals</p>
            <table class="table table-striped table-hover table-responsive">
                <thead>
                    <tr>
                        <th>SEASON</th>
                        <th>TEAM</th>
                        <th>GP</th>
                        <th>PTS</th>
                        <th>REB</th>
                        <th>AST</th>
                        <th>STL</th>
                        <th>BLK</th>
                        <th>TOV</th>
                        <th>FGM</th>
                        <th>FGA</th>
                        <th>3PM</th>
                        <th>3PA</th>
                        <th>FTM</th>
                        <th>FTA</th>
                        <th>OREB</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Specific team stats -->
                    {% for season, season_data in player_career_stats.items %}
                        {% for team_at_time, stats_on_team in season_data.teamly_stats.items %}
                            <tr>
                                {% if forloop.first %}
                                    <td rowspan="{{ season_data.teamly_stats|lengthinc }}">Season {{ season_data.season }}</td>
                                {% endif %}
                                <td>{{ team_at_time }}</td>
                                <td>{{ stats_on_team.totals.gp }}</td>
                                <td>{{ stats_on_team.totals.pts }}</td>
                                <td>{{ stats_on_team.totals.reb }}</td>
                                <td>{{ stats_on_team.totals.ast }}</td>
                                <td>{{ stats_on_team.totals.stl }}</td>
                                <td>{{ stats_on_team.totals.blk }}</td>
                                <td>{{ stats_on_team.totals.tov }}</td>
                                <td>{{ stats_on_team.totals.fgm }}</td>
                                <td>{{ stats_on_team.totals.fga }}</td>
                                <td>{{ stats_on_team.totals.tpm }}</td>
                                <td>{{ stats_on_team.totals.tpa }}</td>
                                <td>{{ stats_on_team.totals.ftm }}</td>
                                <td>{{ stats_on_team.totals.fta }}</td>
                                <td>{{ stats_on_team.totals.oreb }}</td>
                            </tr>
                        {% endfor %}
                        <!-- Full year stats -->
                        {% if season_data.teamly_stats|length > 1 %}
                            <tr>
                                <td></td>
                                <td>{{ season_data.yearly_stats.totals.gp }}</td>
                                <td>{{ season_data.yearly_stats.totals.pts }}</td>
                                <td>{{ season_data.yearly_stats.totals.reb }}</td>
                                <td>{{ season_data.yearly_stats.totals.ast }}</td>
                                <td>{{ season_data.yearly_stats.totals.stl }}</td>
                                <td>{{ season_data.yearly_stats.totals.blk }}</td>
                                <td>{{ season_data.yearly_stats.totals.tov }}</td>
                                <td>{{ season_data.yearly_stats.totals.fgm }}</td>
                                <td>{{ season_data.yearly_stats.totals.fga }}</td>
                                <td>{{ season_data.yearly_stats.totals.tpm }}</td>
                                <td>{{ season_data.yearly_stats.totals.tpa }}</td>
                                <td>{{ season_data.yearly_stats.totals.ftm }}</td>
                                <td>{{ season_data.yearly_stats.totals.fta }}</td>
                                <td>{{ season_data.yearly_stats.totals.oreb }}</td>
                            </tr>
                        {% endif %}
                    </tbody>
                    {% endfor %}
            </table>

            <hr>

        </div>

        <!-- Player game logs -->
        <div class="container-fluid mb-5 p-5">
            <h2 class="mb-3">Game Logs</h2>
            <hr>
            <table class="table table-striped table-hover table-responsive">
                <thead>
                    <tr>
                        <th>DAY</th>
                        <th>GMSC</th>
                        <th>PTS</th>
                        <th>REB</th>
                        <th>AST</th>
                        <th>STL</th>
                        <th>BLK</th>
                        <th>TOV</th>
                        <th>FGM</th>
                        <th>FGA</th>
                        <th>3PM</th>
                        <th>3PA</th>
                        <th>FTM</th>
                        <th>FTA</th>
                        <th>DREB</th>
                        <th>OREB</th>
                        <th>STATUS</th>
                        <th>GAME</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Game log stats -->
                    {% for game_log in player_game_logs %}
                        <tr>
                            <td>{{ game_log.day }}</td>
                            <td>{{ game_log.stats.GMSC }}</td>
                            <td>{{ game_log.stats.PTS }}</td>
                            <td>{{ game_log.stats.REB }}</td>
                            <td>{{ game_log.stats.AST }}</td>
                            <td>{{ game_log.stats.STL }}</td>
                            <td>{{ game_log.stats.BLK }}</td>
                            <td>{{ game_log.stats.TOV }}</td>
                            <td>{{ game_log.stats.FGM }}</td>
                            <td>{{ game_log.stats.FGA }}</td>
                            <td>{{ game_log.stats.3PM }}</td>
                            <td>{{ game_log.stats.3PA }}</td>
                            <td>{{ game_log.stats.FTM }}</td>
                            <td>{{ game_log.stats.FTA }}</td>
                            <td>{{ game_log.stats.DREB }}</td>
                            <td>{{ game_log.stats.OREB }}</td>
                            <td>{{ game_log.winner }} beat {{ game_log.loser }} <b>{{ game_log.score }}</b></td>
                            <td><a href="{% url 'stats:view_game' game_log.id %}">View full box score</a></td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Bootstrap accordions -->
        <div class="container-fluid mb-5 p-5">
            <h2 class="mb-3">Player Details</h2>
            <hr>
            <!-- Attribute accordion -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingOne">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseTwo">
                        Attributes
                    </button>
                </h2>
                <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionOne">
                    <div class="accordion-body">
                        <div class="container-fluid" style="padding: 100px; padding-top: 0px; padding-bottom: 10px;">
                            <div class="container">
                                <div class="row">
                                    {% for k, v in player.attributes.items %} 
                                        {% if k in finishing_attributes %}
                                            <div class="col-md-2">
                                                <p class="mt-0 mb-1"><b>{{ k }}</b></p><p>{{ v }}</p>
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                    <hr>
                                </div>
                            </div>
                            <div class="container">
                                <div class="row">
                                    {% for k, v in player.attributes.items %} 
                                        {% if k in shooting_attributes %}
                                            <div class="col-md-2">
                                                <p class="mt-0 mb-1"><b>{{ k }}</b></p><p>{{ v }}</p>
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                    <hr>
                                </div>
                            </div> 
                            <div class="container">
                                <div class="row">
                                    {% for k, v in player.attributes.items %} 
                                        {% if k in playmaking_attributes %}
                                            <div class="col-md-2">
                                                <p class="mt-0 mb-1"><b>{{ k }}</b></p><p>{{ v }}</p>
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                    <hr>
                                </div>
                            </div>
                            <div class="container">
                                <div class="row">
                                    {% for k, v in player.attributes.items %} 
                                        {% if k in defense_attributes %}
                                            <div class="col-md-2">
                                                <p class="mt-0 mb-1"><b>{{ k }}</b></p><p>{{ v }}</p>
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                    <hr>
                                </div>
                            </div>
                            <div class="container">
                                <div class="row">
                                    {% for k, v in player.attributes.items %} 
                                        {% if k in physical_attributes %}
                                            <div class="col-md-2">
                                                <p class="mt-0 mb-1"><b>{{ k }}</b></p><p>{{ v }}</p>
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                    <hr>
                                </div>
                            </div> 
                        </div>
                    </div>
                </div>
            </div>
            <!-- Badge accordion -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwo">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
                        Badges
                    </button>
                </h2>
                <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo" data-bs-parent="#accordionOne">
                    <div class="accordion-body">
                        <div class="container-fluid mt-5" style="padding: 100px; padding-top: 0px; padding-bottom: 10px;">
                            <div class="container">
                                <div class="row">
                                    {% for k, v in player.badges.items %} 
                                        {% if k in finishing_badges %}
                                            <div class="col-md-2 mb-2">
                                                <p class="mt-0 mb-1"><b>{{ k }}</b></p>
                                                {% if v == 0 %}
                                                    {{ badgeEmojis.0 }} Unequipped
                                                {% elif v == 1 %}
                                                    {{ badgeEmojis.1 }} Bronze
                                                {% elif v == 2 %}
                                                    {{ badgeEmojis.2 }} Silver
                                                {% elif v == 3 %}
                                                    {{ badgeEmojis.3 }} Gold
                                                {% elif v == 4 %}
                                                    {{ badgeEmojis.4 }} Hall of Fame
                                                {% endif %}
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <hr>
                            </div>
                
                
                            <div class="container">
                                <div class="row">
                                    {% for k, v in player.badges.items %} 
                                        {% if k in shooting_badges %}
                                            <div class="col-md-2 mb-2">
                                                <p class="mt-0 mb-1"><b>{{ k }}</b></p>
                                                {% if v == 0 %}
                                                    {{ badgeEmojis.0 }} Unequipped
                                                {% elif v == 1 %}
                                                    {{ badgeEmojis.1 }} Bronze
                                                {% elif v == 2 %}
                                                    {{ badgeEmojis.2 }} Silver
                                                {% elif v == 3 %}
                                                    {{ badgeEmojis.3 }} Gold
                                                {% elif v == 4 %}
                                                    {{ badgeEmojis.4 }} Hall of Fame
                                                {% endif %}
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                
                            <hr>
                
                            <div class="container">
                                <div class="row">
                                    {% for k, v in player.badges.items %} 
                                        {% if k in playmaking_badges %}
                                            <div class="col-md-2 mb-2">
                                                <p class="mt-0 mb-1"><b>{{ k }}</b></p>
                                                {% if v == 0 %}
                                                    {{ badgeEmojis.0 }} Unequipped
                                                {% elif v == 1 %}
                                                    {{ badgeEmojis.1 }} Bronze
                                                {% elif v == 2 %}
                                                    {{ badgeEmojis.2 }} Silver
                                                {% elif v == 3 %}
                                                    {{ badgeEmojis.3 }} Gold
                                                {% elif v == 4 %}
                                                    {{ badgeEmojis.4 }} Hall of Fame
                                                {% endif %}
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                
                            <hr>
                
                            <div class="container">
                                <div class="row">
                                    {% for k, v in player.badges.items %} 
                                        {% if k in defense_badges %}
                                            <div class="col-md-2 mb-2">
                                                <p class="mt-0 mb-1"><b>{{ k }}</b></p>
                                                {% if v == 0 %}
                                                    {{ badgeEmojis.0 }} Unequipped
                                                {% elif v == 1 %}
                                                    {{ badgeEmojis.1 }} Bronze
                                                {% elif v == 2 %}
                                                    {{ badgeEmojis.2 }} Silver
                                                {% elif v == 3 %}
                                                    {{ badgeEmojis.3 }} Gold
                                                {% elif v == 4 %}
                                                    {{ badgeEmojis.4 }} Hall of Fame
                                                {% endif %}
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                
                            <hr>
                
                        </div>
                    </div>
                </div>
            </div>
            <!-- Tendency accordion -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseTwo">
                        Tendencies
                    </button>
                </h2>
                <div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree" data-bs-parent="#accordionOne">
                    <div class="accordion-body">
                        <div class="container-fluid mt-5" style="padding: 100px; padding-top: 0px; padding-bottom: 10px;">
                            <div class="container">
                                <div class="row">
                                    {% for k, v in player.tendencies.items %} 
                                        <div class="col-md-4 mb-2">
                                            <p class="mt-0 mb-1"><b>{{ k }}</b></p>
                                            <p>{{ v }}</p>
                                        </div>
                                    {% endfor %}
                                </div>
                                <hr>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script src="{% static 'main/js/players/copyJSON.js' %}"></script>

{% endblock %}